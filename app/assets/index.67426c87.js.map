{"mappings":"SA8BSA,qBAAqBC,GAC1BC,YAAYC,YAAYF,YAGnBG,0BAA0BH,GAC/BI,iBAAiBF,YAAYF,YAGxBK,cAAcC,OACnB,IAAIC,EAAMD,EAAQE,MAAM,KAEpBC,GADOF,EAAI,GAAGG,MAAK,WAAY,GACxBC,KAAKJ,EAAI,KAChBK,EAAIH,EAAKI,OACTC,EAAQ,IAAIC,WAAWH,GAEpBA,KACHE,EAAMF,GAAKH,EAAKO,WAAWJ,GAE/B,OAAOE,iBAGIG,cAAcC,EAAQC,EAAcC,GAC/CC,QAAQC,IAAI,uBACZ,IAAIC,QAAYC,QAAQnB,cAAcc,IACtCM,YAAW,WACPtB,0BAA0BuB,KAAKC,UAAU,CACrCC,QAASV,EACTK,IAAKA,EAAIM,gBAEdT,kBAIQI,QAAQM,GAGnB,MAAMP,IAACA,SAAaQ,KAAKC,IAAIF,GAI7B,OAFAT,QAAQC,IAAI,sBAAuBC,EAAIM,kBACjCI,QAAQV,GACPA,iBAGIW,QAAQX,GACnB,UAAW,MAAMY,KACbJ,KAAKK,IAAIb,GAGTF,QAAQC,IAAIa,kBAILF,QAAQV,GACnB,IAAIc,QAAaN,KAAKO,IAAIN,IAAIT,GAC9BF,QAAQC,IAAI,eAAiBe,GApFjCE,SAASC,iBAAiB,oBAAkBC,UACxCpB,QAAQC,IAAI,2BAKZ,MAAMS,QAAaW,KAAKC,OAAO,CAACC,KAAM,QAAUC,KAAKC,WACrDC,OAAOhB,KAAOA,EAEd,MAAMiB,EAASjB,EAAKkB,WAAa,SAAW,UACtCC,QAAWnB,EAAKmB,KAEtB7B,QAAQC,IAAG,gBAAiB0B,SAAcE,KAW1C7B,QAAQC,IAAI,yBACZvB,qBAAqB","sources":["src/index.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', async () => {\n    console.log(\"DOMContentLoaded  start\");\n    // const insertAfter = (referenceNode, newNode) => {\n    //   referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);\n    // }\n\n    const node = await Ipfs.create({repo: 'ipfs-' + Math.random()})\n    window.node = node\n\n    const status = node.isOnline() ? 'online' : 'offline'\n    const id = await node.id()\n\n    console.log(`Node status: ${status} id: ${id}`)\n\n    // const statusDOM = document.getElementById('status')\n    // statusDOM.innerHTML = `Node status: ${status}`\n\n    // const newDiv = document.createElement(\"div\");\n    // newDiv.id = \"node\"\n    // const newContent = document.createTextNode(`ID: ${id.id}`);\n    // newDiv.appendChild(newContent);\n\n    // insertAfter(statusDOM, newDiv);\n    console.log(\"DOMContentLoaded  end\");\n    sendNodeReadyMessage(\"\");\n    // You can write more code here to use it. Use methods like\n    // node.add, node.get. See the API docs here:\n    // https://github.com/ipfs/js-ipfs/tree/master/packages/interface-ipfs-core\n})\n\nfunction sendNodeReadyMessage(message) {\n    onNodeReady.postMessage(message);\n}\n\nfunction sendUploadCompleteMessage(message) {\n    onUploadComplete.postMessage(message);\n}\n\nfunction dataURLtoFile(dataurl) {\n    var arr = dataurl.split(','),\n        mime = arr[0].match(/:(.*?);/)[1],\n        bstr = atob(arr[1]),\n        n = bstr.length,\n        u8arr = new Uint8Array(n);\n\n    while (n--) {\n        u8arr[n] = bstr.charCodeAt(n);\n    }\n    return u8arr;\n}\n\nasync function addBase64File(taskId, base64String, delay) {\n    console.log(\"addBase64File start\")\n    let cid = await addFile(dataURLtoFile(base64String));\n    setTimeout(function () {\n        sendUploadCompleteMessage(JSON.stringify({\n            task_id: taskId,\n            cid: cid.toString()\n        }));\n    }, delay);\n    // sendUploadCompleteMessage(cid.toString());\n}\n\nasync function addFile(file) {\n\n    // const {cid} = await node.add('Hello world!')\n    const {cid} = await node.add(file)\n    // console.log('successfully stored',JSON.stringify(cid))\n    console.log('successfully stored', cid.toString())\n    await pinFile(cid)\n    return cid;\n}\n\nasync function catFile(cid) {\n    for await (const data of\n        node.cat(cid)) {\n        // node.cat('QmRV7njbZs1iCP3g7HYgwqDnS2Pd4cL2yKGpasNodHe8dk')) {\n        // console.log(data.toString())\n        console.log(data)\n    }\n}\n\nasync function pinFile(cid) {\n    let cid2 = await node.pin.add(cid)\n    console.log(\"pinned file:\" + cid2)\n}\n"],"names":["sendNodeReadyMessage","message","onNodeReady","postMessage","sendUploadCompleteMessage","onUploadComplete","dataURLtoFile","dataurl","arr","split","bstr","match","atob","n","length","u8arr","Uint8Array","charCodeAt","addBase64File","taskId","base64String","delay","console","log","cid","addFile","setTimeout","JSON","stringify","task_id","toString","file","node","add","pinFile","catFile","data","cat","cid2","pin","document","addEventListener","async","Ipfs","create","repo","Math","random","window","status","isOnline","id"],"version":3,"file":"index.67426c87.js.map"}